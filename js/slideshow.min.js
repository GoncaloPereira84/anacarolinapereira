var slideIndex = 1,
  intervals = [],
  isPlaying = !1,
  xDown = null,
  yDown = null,
  isActive = !0,
  isMobile = !1;
function drawLines() {
  $(".nodules").addClass("start"),
    $(".main-path").addClass("start"),
    $(".main-path-fill").addClass("start");
}
function deleteLines() {
  $(".nodules").removeClass("start"),
    $(".main-path").removeClass("start"),
    $(".main-path-fill").removeClass("start");
}
function playAnim() {
  drawLines(), intervals.forEach(clearInterval);
  var e = document.querySelector("#slideshow-home");
  e.addEventListener("touchstart", handleTouchStart, !1),
    e.addEventListener("touchmove", handleTouchMove, !1);
  var t = setInterval(() => {
    deleteLines(), prevSlides(-1);
    var t = -0.25 * (slideIndex - 1) * 100;
    (e.style.transform = "translateX(" + t + "%)"), (isPlaying = !0);
  }, 8e3);
  setTimeout(() => {
    isPlaying = !1;
  }, 8e3),
    intervals.push(t);
}
function showSlide(e) {
  var t,
    i = document.querySelectorAll("#slideshow-home .slide-a"),
    a = document.querySelectorAll(".indicators .ind");
  for (
    e > i.length && (slideIndex = 1), e < 1 && (slideIndex = i.length), t = 0;
    t < i.length;
    t++
  )
    i[t].className = "slide-a";
  for (t = 0; t < a.length; t++)
    (a[t].className = a[t].className.replace(" active", "")), (isActive = !1);
  (i[slideIndex - 1].className = "slide-a active"),
    (a[slideIndex - 1].className += " active"),
    (isActive = !0),
    (isPlaying = !1);
}
function prevSlides(e) {
  (isPlaying = !1),
    showSlide((slideIndex -= e)),
    intervals.forEach(clearInterval),
    setTimeout(() => {
      drawLines(), 0 == isPlaying && playAnim();
    }, 500);
}
function plusSlides(e) {
  (isPlaying = !1),
    showSlide((slideIndex += e)),
    intervals.forEach(clearInterval),
    setTimeout(() => {
      drawLines(), 0 == isPlaying && playAnim();
    }, 500);
}
function currentSlide(e) {
  showSlide((slideIndex = e)), deleteLines(), intervals.forEach(clearInterval);
  var t = document.querySelector("#slideshow-home");
  t.removeEventListener("touchstart", handleTouchStart, !1),
    t.removeEventListener("touchmove", handleTouchMove, !1);
  var i = -0.25 * (slideIndex - 1) * 100;
  (t.style.transform = "translateX(" + i + "%)"),
    setTimeout(() => {
      drawLines(),
        (isPlaying = !1),
        setTimeout(() => {
          t.addEventListener("touchstart", handleTouchStart, !1),
            t.addEventListener("touchmove", handleTouchMove, !1),
            0 == isPlaying && playAnim();
        }, 1e3);
    }, 500);
}
function getTouches(e) {
  return e.touches || e.originalEvent.touches;
}
function handleTouchStart(e) {
  const t = getTouches(e)[0];
  (xDown = t.clientX), (yDown = t.clientY);
}
function handleTouchMove(e) {
  if (xDown && yDown) {
    var t = e.touches[0].clientX,
      i = e.touches[0].clientY,
      a = xDown - t,
      l = yDown - i,
      n = document.querySelector("#slideshow-home .slide-a.active"),
      s =
        (document.querySelector(".indicators .ind.active"),
        n.getAttribute("data-slide-id"),
        document.querySelector("#slideshow-home"));
    if (Math.abs(a) > Math.abs(l))
      if (a > 0) {
        deleteLines(), plusSlides(1);
        var o = -0.25 * (slideIndex - 1) * 100;
        s.style.transform = "translateX(" + o + "%)";
      } else {
        deleteLines(), prevSlides(1);
        o = -0.25 * (slideIndex - 1) * 100;
        s.style.transform = "translateX(" + o + "%)";
      }
    (xDown = null), (yDown = null);
  }
}
window.addEventListener("load", function () {
  var e = Array.prototype.map,
    t = $(window).height(),
    i = $(window).width();
  $.ajax({
    url: "ajax/getSlideshow.php",
    type: "post",
    data: { width: i, height: t, recordSize: "true" },
  }).done(function (t) {
    var i = t.split("||"),
      a = JSON.parse(i[1]);
    JSON.parse(i[2]).width > 768
      ? e.call(a, function (t) {
          var i = t.static_img;
          if (null != i && 5 == t.id) {
            var a = i.split("../../httpdocs/"),
              l = document.querySelectorAll("#slideshow-home .slide-a");
            e.call(l, function (e) {
              5 == e.getAttribute("data-slide-id") &&
                (e.childNodes[1].style.backgroundImage =
                    "url(" + i + ")");
            });
          }
        })
      : e.call(a, function (t) {
          var i = t.img_mobile;
          if (null != i && 5 == t.id) {
            var a = i.split("../../httpdocs/"),
              l = document.querySelectorAll("#slideshow-home .slide-a");
            e.call(l, function (e) {
              5 == e.getAttribute("data-slide-id") &&
                (e.childNodes[1].style.backgroundImage =
                    "url(" + i + ")");
            });
          }
        });
  });
}),
  window.addEventListener("resize", function () {
    var e = Array.prototype.map,
      t = $(window).height(),
      i = $(window).width();
    $.ajax({
      url: "ajax/getSlideshow.php",
      type: "post",
      data: { width: i, height: t, recordSize: "true" },
    }).done(function (t) {
      var i = t.split("||"),
        a = JSON.parse(i[1]);
      JSON.parse(i[2]).width > 768
        ? e.call(a, function (t) {
            var i = t.static_img;
            if (null != i && 5 == t.id) {
              var a = i.split("../../httpdocs/"),
                l = document.querySelectorAll("#slideshow-home .slide-a");
              e.call(l, function (e) {
                5 == e.getAttribute("data-slide-id") &&
                  (e.childNodes[1].style.backgroundImage =
                    "url(" + i + ")");
              });
            }
          })
        : e.call(a, function (t) {
            var i = t.img_mobile;
            if (null != i && 5 == t.id) {
              var a = i.split("../../httpdocs/"),
                l = document.querySelectorAll("#slideshow-home .slide-a");
              e.call(l, function (e) {
                5 == e.getAttribute("data-slide-id") &&
                  (e.childNodes[1].style.backgroundImage =
                    "url(" + i + ")");
              });
            }
          });
    });
  }),
  $("#slideshow-home").addClass("not-hidden");
var slideArray = [];
$(".slide-a").each(function () {
  slideArray.push($(this));
}),
  $("#slideshow-home").css("width", 100 * Object.keys(slideArray).length + "%"),
  window.addEventListener("resize", function () {
    window.innerWidth < 1025
      ? ((isMobile = !0), (document.cookie = "isMobile = true"))
      : ((isMobile = !1), (document.cookie = "isMobile = false"));
  }),
  window.addEventListener("load", function () {
    window.innerWidth < 1025
      ? ((isMobile = !0), (document.cookie = "isMobile = true"))
      : ((isMobile = !1), (document.cookie = "isMobile = false"));
  });
